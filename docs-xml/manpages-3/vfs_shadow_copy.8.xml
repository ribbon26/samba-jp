<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE refentry PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<refentry id="vfs_shadow_copy.8">

<refmeta>
	<refentrytitle>vfs_shadow_copy</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo class="source">Samba</refmiscinfo>
	<refmiscinfo class="manual">System Administration tools</refmiscinfo>
	<refmiscinfo class="version">3.2</refmiscinfo>
</refmeta>


<refnamediv>
	<refname>vfs_shadow_copy</refname>
	<refpurpose>Samba の共有を指定した時間帯に read only とする(訳注: これはコピペミスであり、実際は「シャドウコピー機能を実現する。」などとすべきである。)</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>vfs objects = shadow_copy</command>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>詳細</title>

	<para>この VFS モジュールは
	<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> スイートの一部である。</para>

	<para><command>vfs_shadow_copy</command> VFS モジュールは
	Microsoft のシャドウコピーサービスと似た機能を提供する。
	適切に設定された場合、このモジュールにより Microsoft 
	シャドウコピークライアントから Samba の共有上にある "シャドウコピー"	
	を参照することが可能となる。
	</para>

	<para>このモジュールはスタッカブルである。</para>

</refsect1>

<refsect1>
	<title>設定</title>

	<para><command>vfs_shadow_copy</command> はファイルシステムのスナップショットの実装が必要である。
	一般的なファイルシステムの多くが標準でこれをサポートしている。	
	</para>

	<para>ファイルシステムのシャドウコピーを
	<command> vfs_shadow_copy</command> が認識するためには、
	特定の名称のディレクトリにマウントされる必要がある。
	スナップショットのマウントポイントは共有ディレクトリの直下である必要がある。
	</para>

	<para>スナップショットの名前形式は @GMT-YYYY.MM.DD-hh.mm.ss である必要がある。
       	<itemizedlist>
       		<listitem><para><command>YYYY</command> には4桁で年を指定する</para></listitem>
       		<listitem><para><command>MM</command> は2桁で月を指定する</para></listitem>
       		<listitem><para><command>DD</command> は2桁で日を指定するis the 2 digit day</para></listitem>
       		<listitem><para><command>hh</command> は2桁で時間を指定する</para></listitem>
       		<listitem><para><command>mm</command> は2桁で分を指定する</para></listitem>
       		<listitem><para><command>ss</command> は2桁で秒を指定する</para></listitem>
       	</itemizedlist>
	</para>

       	<para> <command>vfs_shadow_copy</command> のスナップショットの名前形式は、
	<citerefentry><refentrytitle>date</refentrytitle>
	<manvolnum>1</manvolnum></citerefentry> コマンドを用いて生成できる:
	<programlisting>
	TZ=GMT date +@GMT-%Y.%m.%d-%H.%M.%S
	</programlisting></para>

</refsect1>

<refsect1>
	<title>設定例</title>

	<para>ユーザーのホームディレクトリでシャドウコピーをサポートするには以下の設定を行なう:</para>
<programlisting>
        <smbconfsection name="[homes]"/>
	<smbconfoption name="vfs objects">shadow_copy</smbconfoption>
</programlisting>

</refsect1>

<refsect1>
	<title>注意</title>

	<para>これはバックアップ、アーカイブ、バージョン管理のための機能ではないことに注意。
	</para>

	<para> Samba と Windows 双方とも
	<command>vfs_shadow_copy</command> はエンドユーザのための機能として設計されている。
	これはバックアップやアーカイ機能を代替、もしくは拡張するものではなく、
	そのような認識をしてはならない。
	バージョン管理機能が必要な場合は、バージョン管理機能を実装する必要がある。
	</para>

</refsect1>



<refsect1>
	<title>バージョン</title>

	<para>このマニュアルページは Samba 3.0.25 用のものである。
	</para>
</refsect1>

<refsect1>
	<title>AUTHOR</title>

	<para>The original Samba software and related utilities
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar
	to the way the Linux kernel is developed.</para>

</refsect1>
<refsect1>
	<title>日本語訳</title>
	<para>このマニュアルページは Samba 3.2.4  対応のものである。</para>
        <para>このドキュメントの Samba 3.2.4 対応の翻訳は
	<itemizedlist>
		<listitem><para>たかはしもとのぶ (monyo@samba.gr.jp)</para></listitem>
	</itemizedlist>	
        によって行なわれた。</para>
</refsect1>

</refentry>
