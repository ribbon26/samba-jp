<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
				  
<!ENTITY % globalentities SYSTEM '../global.ent'> %globalentities;
]>
<refentry id="wbinfo.1">

<refmeta>
	<refentrytitle>wbinfo</refentrytitle>
	<manvolnum>1</manvolnum>
</refmeta>


<refnamediv>
	<refname>wbinfo</refname>
	<refpurpose>winbind デーモンから情報を問い合わせる</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>wbinfo</command>
		<arg choice="opt">-a user%password</arg>
		<arg choice="opt">-c username</arg>
		<arg choice="opt">-C groupname</arg>
		<arg choice="opt">--domain domain</arg>
		<arg choice="opt">-I ip</arg>
		<arg choice="opt">-s sid</arg>
		<arg choice="opt">-u</arg>
		<arg choice="opt">-U uid</arg>
		<arg choice="opt">-g</arg>
		<arg choice="opt">--get-auth-user</arg>
		<arg choice="opt">-G gid</arg>
		<arg choice="opt">-m</arg>
		<arg choice="opt">-n name</arg>
		<arg choice="opt">-N netbios-name</arg>
		<arg choice="opt">-o user:group</arg>
		<arg choice="opt">-O user:group</arg>
		<arg choice="opt">-p</arg>
		<arg choice="opt">-r user</arg>
		<arg choice="opt">--set-auth-user user%password</arg>
		<arg choice="opt">--sequence</arg>
		<arg choice="opt">-S sid</arg>
		<arg choice="opt">-t</arg>
		<arg choice="opt">-x username</arg>
		<arg choice="opt">-X groupname</arg>
		<arg choice="opt">-Y sid</arg>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>解説</title>

	<para>このツールは <citerefentry><refentrytitle>Samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> システムの一部である。</para>
	
	<para><command>wbinfo</command> プログラムは、<citerefentry><refentrytitle>
	winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry> 
	デーモンが生成し使用した情報を、問い合わせて返す。</para>

	<para><command>wbinfo</command> プログラムが情報を取得できるように
	<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	デーモンが正しく設定され、動作していなければならない。</para>
</refsect1>

<refsect1>
	<title>オプション</title>

	<variablelist>		
		<varlistentry>
		<term>-a username%password</term>
		<listitem><para>winbindd を通じてユーザ認証を試みる。
		このオプションは両方の認証手段をチェックし、その結果を報告する。 
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-c user</term>
		<listitem><para>ローカル winbind ユーザを作成する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-C group</term>
		<listitem><para>ローカル winbindd グループを作成する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>--domain name</term>
		<listitem><para>このパラメータで指定された操作が行われるドメインを
		設定する。特殊なドメイン名である '.' は、現在 Winbind が属する
		ドメインを表すために使用される。今のところ、<option>--sequence
		</option>、<option>-u</option> と <option>-g</option>
		オプションのみがこのパラメータに対応している。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-g</term>
		<listitem><para>このオプションは 
		<citerefentry><refentrytitle>Samba</refentrytitle><manvolnum>7</manvolnum></citerefentry>
		デーモンが動作している、Windows NT ドメイン内で利用できる全グループを
		一覧表示する。また、すべての信頼されるドメインのグループも
		一覧表示される。この操作では 
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		で見えないグループの ID は取得できない。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--get-auth-user</term>
		<listitem><para>ドメインコントローラとのセッションセットアップで、
		Winbind で使用されるユーザ名とパスワードを表示する。ユーザ名と
		パスワードは '-A' オプションを使ってセットできる。
		root しか使用できない。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-G gid</term>
		<listitem><para>UNIX の group id を Windows NT の SID
		に変換しようとする。もし指定された gid が idmap gid で指定された
		範囲に収まらない場合、この操作は失敗する。</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-I ip</term>
		<listitem><para><parameter>-I</parameter> オプションは
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum>
		</citerefentry> に、<parameter>ip</parameter> パラメータで指定された
		IP アドレスと対応する NetBIOS 名を問い合わせるため、node status
		request を送る。
		</para></listitem>
		</varlistentry>


		<varlistentry>
		<term>-m</term>
		<listitem><para><citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		が名前解決の際に問い合わせを行う、Windows NT サーバが信頼している
		ドメインの一覧を提供する。このリストには、
		サーバがプライマリドメインコントローラとなっている Windows NT
		ドメインは含まれない。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-n name</term>
		<listitem><para><parameter>-n</parameter> オプションは 
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		に対し、指定された名前と対応した SID
		を問い合わせる。Winbind separator として指定された文字を使用することで
		ユーザ名の前にドメイン名を指定することができる。
		たとえば、CWDOM1/Administrator はドメイン CWDOM1 の Administrator
		ユーザとなる。もしドメインが指定されていない場合、使用されるドメインは
		<citerefentry><refentrytitle>smb.conf</refentrytitle><manvolnum>5
		</manvolnum></citerefentry> の <parameter>workgroup</parameter>
		パラメータで指定されたものとなる。</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-N name</term>
		<listitem><para><parameter>-N</parameter> オプションは
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8
		</manvolnum></citerefentry> を使い、<parameter>name</parameter>
		パラメータで指定された NetBIOS 名に対応する IP アドレスを WINS
		サーバに問い合わせる。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-o user:group</term>
		<listitem><para>Winbindd のローカルグループを、セカンダリグループと
		して Winbindd のローカルユーザに追加する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-O user:group</term>
		<listitem><para>>Winbindd のローカルユーザにセカンダリグループとして
		付与されている Winbindd のローカルグループを、ユーザから取り除く。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-p</term>
		<listitem><para>Winbindd が動作中かどうか確認する。
		'成功' か '失敗' かを表示する。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-r username</term>
		<listitem><para>ユーザが所属する UNIX の group ids 一覧を表示しようとする。
		これはドメインコントローラに登録されているユーザにのみ動作する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-s sid</term>
		<listitem><para><parameter>-s</parameter> を使用して SID から名前を解決
		することができる。これは前述の <parameter>-n</parameter> オプションの
		逆である。SID はこれまでどおり Microsoft のフォーマットを用いた ASCII
		文字列で指定する必要がある。たとえば、
		S-1-5-21-1455342024-3071081365-2475485837-500 というふうに記述する。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--set-auth-user username%password</term>
		<listitem><para>ドメインコントローラとのセッション確立時に使用される
		ユーザ名とパスワードを保存する。これは winbindd が Restrict Anonymous
		が有効となっている Windows 2000 ドメインで動作することを可能にする。
		(Windows 2000 サーバ互換のパーミッションのみ)
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--sequence</term>
		<listitem><para>全ての既知のドメインの sequence number を表示する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-S sid</term>
		<listitem><para>SID を UNIX の user id に変換する。もし SID が
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		で UNIX ユーザにマッピングされていない場合、この操作は失敗する。</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-t</term>
		<listitem><para>Samba サーバが動作中の Windows NT ドメインに参加時に、
		ワークステーションの信頼するアカウントが作成されたことを確認する。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-u</term>
		<listitem><para>このオプションは 
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		デーモンが動作している Windows NT domain に存在する全てのユーザ
		を一覧表示する。全ての信頼されるドメインのユーザ一覧も表示する。
		この操作は <citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		で見えるユーザ以外にはユーザ ID を割り当てることはない。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-U uid</term>
		<listitem><para>UNIX の user id を Windows NT の SID に変換する。
		もし指定された uid が idmap uid の範囲に収まらない場合、この操作は
		失敗する。</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-x user</term>
		<listitem><para>既存のローカルの winbindd user を削除する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-X group</term>
		<listitem><para>既存のローカルの winbindd group を削除する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-Y sid</term>
		<listitem><para>SID を UNIX の group id に変換する。もし SID が
		<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		によって UNIX の group に関連付けられていない場合、操作は失敗する。</para></listitem>
		</varlistentry>


		&stdarg.version;
		&stdarg.help;

	</variablelist>
</refsect1>


<refsect1>
	<title>終了ステータス</title>

	<para>wbinfo プログラムは操作に成功すると 0 を返し、失敗すると 0 を返す。もし
	<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	デーモンが動作していない場合、<command>wbinfo</command> 
	は常に失敗を返す。</para>
</refsect1>


<refsect1>
	<title>バージョン</title>

	<para>この man ページは、Samba システムのバージョン 3.0 用である。</para>
</refsect1>

<refsect1>
	<title>関連項目</title>
	<para><citerefentry><refentrytitle>winbindd</refentrytitle>
	<manvolnum>8</manvolnum></citerefentry></para>
</refsect1>

<refsect1>
	<title>作者</title>
	
	<para>オリジナルの Samba ソフトウェアと関連するユーティリティは、
	Andrew Tridgell によって作られた。Samba は現在 Linux
	カーネルが開発されているような方法でのオープンソースプロジェクトである
	Samba Team によって開発されている。</para>
	
	<para><command>wbinfo</command> と <command>winbindd</command>
	は Tim Potter によって書かれた。</para>
	
	<para>Samba 2.2 用の DocBook 形式への変換は Gerald Carter が行った。
	Samba 3.0 用の DocBook XML 4.2 形式への変換は Alexander Bokovoy が行った。
	</para>
</refsect1>

<refsect1>
	<title>日本語訳</title>

	<itemizedlist>
		<listitem><para>山田 史朗 (shiro@miraclelinux.com)</para></listitem>
	</itemizedlist>	
</refsect1>

</refentry>

