<?xml version="1.0" encoding="EUC-JP"?>
<!DOCTYPE refentry PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<refentry id="wbinfo.1">

<refmeta>
	<refentrytitle>wbinfo</refentrytitle>
	<manvolnum>1</manvolnum>
</refmeta>


<refnamediv>
	<refname>wbinfo</refname>
	<refpurpose>winbind デーモンへ情報を問い合わせる</refpurpose>
</refnamediv>

<refsynopsisdiv>
	<cmdsynopsis>
		<command>wbinfo</command>
		<arg choice="opt">-a user%password</arg>
		<arg choice="opt">--all-domains</arg>
		<arg choice="opt">--allocate-gid</arg>
		<arg choice="opt">--allocate-uid</arg>
		<arg choice="opt">-D domain</arg>
		<arg choice="opt">--domain domain</arg>
		<arg choice="opt">-g</arg>
		<arg choice="opt">--getdcname domain</arg>
		<arg choice="opt">--get-auth-user</arg>
		<arg choice="opt">-G gid</arg>
		<arg choice="opt">-h</arg>
		<arg choice="opt">-i user</arg>
		<arg choice="opt">-I ip</arg>
		<arg choice="opt">-K user%password</arg>
		<arg choice="opt">-m</arg>
		<arg choice="opt">-n name</arg>
		<arg choice="opt">-N netbios-name</arg>
		<arg choice="opt">--own-domain</arg>
		<arg choice="opt">-p</arg>
		<arg choice="opt">-r user</arg>
		<arg choice="opt">-s sid</arg>
		<arg choice="opt">--separator</arg>
		<arg choice="opt">--sequence</arg>
		<arg choice="opt">--set-auth-user user%password</arg>
		<arg choice="opt">-S sid</arg>
		<arg choice="opt">-t</arg>
		<arg choice="opt">-u</arg>
		<arg choice="opt">--user-domgroups sid</arg>
		<arg choice="opt">--user-sids sid</arg>
		<arg choice="opt">-U uid</arg>
		<arg choice="opt">-V</arg>
		<arg choice="opt">-Y sid</arg>
	</cmdsynopsis>
</refsynopsisdiv>

<refsect1>
	<title>解説</title>

	<para>このツールは、<citerefentry><refentrytitle>samba</refentrytitle>
	<manvolnum>7</manvolnum></citerefentry> システムの一部である。</para>

	<para><command>wbinfo</command> プログラムは、<citerefentry><refentrytitle>
	winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry> 
	デーモンが生成して使用中の情報を、返却する。</para>

	<para><command>wbinfo</command> プログラムが情報を取得する上では、
	<citerefentry><refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
	デーモンが正しく設定され、動作していることが必要である。</para>
</refsect1>

<refsect1>
	<title>オプション</title>
	
	<variablelist>		
		<varlistentry>
		<term>-a|--authenticate username%password</term>
		<listitem><para>
		winbindd に対してユーザ認証を試行する。
		これにより、認証方式とその結果の表示の両方が行われる。
		</para><note><para>この機能を用いて、
		サードパーティのアプリケーションの認証を行わないこと。
		代わりに <citerefentry><refentrytitle>ntlm_auth</refentrytitle>
	<manvolnum>1</manvolnum></citerefentry> を用いること。</para></note></listitem>
		</varlistentry>

		<varlistentry>
		<term>--allocate-gid</term>
		<listitem><para>idmap 機能により、新規の GID を払い出す。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--allocate-uid</term>
		<listitem><para>idmap 機能により、新規の UID を払い出す。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--all-domains</term>
		<listitem><para>全てのドメイン(自身の所属ドメインと信頼関係にあるドメイン全て)を列挙する。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--domain name</term>
		<listitem><para>
		このパラメータにより、指定された処理の実行対象となるドメインを指定する。
		ドメイン名として「.」が指定された場合、winbindd が現在所属するドメイン名が指定されたものとして扱われる。
		現在のところ、
		<option>--sequence</option> 、
		<option>-u</option> 、<option>-g</option> オプションのみがこのパラメータに対応している。
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-D|--domain-info domain</term>
		<listitem><para>ドメインに関して保持している情報を表示する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-g|--domain-groups</term>
		<listitem><para>
		
This option will list all groups available 
		in the Windows NT domain for which the <citerefentry><refentrytitle>samba</refentrytitle>
		<manvolnum>7</manvolnum></citerefentry> デーモンが動作している
		Windows NT ドメインで利用可能なすべてのグループを表示する。
		信頼関係にあるドメインのすべてのグループも表示される。
		この操作により、
		<citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry>
		が ID を割り当てていないグループに対して、ID が割り当てられることはない。
 </para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--get-auth-user</term>
		<listitem><para>
		winbindd がドメインコントローラとのsession setupで用いるユーザ名とパスワードを表示する。
		ユーザ名とパスワードは
		<option>--set-auth-user</option> で設定できる。
		このオプションは root のみが利用できる。</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>--getdcname domain</term>
		<listitem><para>指定した domain のドメインコントローラの名前を取得する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-G|--gid-to-sid gid</term>
		<listitem><para>
		UNIX のグループ ID (GID) を Windows NT の SID に変換する。
		指定された GID が idmap gid パラメータの範囲外だった場合、処理は失敗する。
		 </para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-i|--user-info user</term>
		<listitem><para>user の情報を取得する。
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-I|--WINS-by-ip ip</term>
		<listitem><para><parameter>-I</parameter> オプションにより、
		queries <citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry> to send a node status
		request to get the NetBIOS name associated with the IP address
		specified by the <parameter>ip</parameter> parameter.
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-K|--krb5auth username%password</term>
		<listitem><para>Attempt to authenticate a user via Kerberos. 
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-m|--trusted-domains</term>
		<listitem><para>Produce a list of domains trusted by the 
		Windows NT server <citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry> contacts 
		when resolving names.  This list does not include the Windows 
		NT domain the server is a Primary Domain Controller for.
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-n|--name-to-sid name</term>
		<listitem><para>The <parameter>-n</parameter> option 
		queries <citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry> for the SID 		
		associated with the name specified. Domain names can be specified 
		before the user name by using the winbind separator character.  
		For example CWDOM1/Administrator refers to the Administrator
		user in the domain CWDOM1.  If no domain is specified then the 
		domain used is the one specified in the <citerefentry><refentrytitle>smb.conf</refentrytitle>
		<manvolnum>5</manvolnum></citerefentry>	<parameter>workgroup
		</parameter> parameter. </para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-N|--WINS-by-name name</term>
		<listitem><para>The <parameter>-N</parameter> option 
		queries <citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry> to query the WINS
		server for the IP address associated with the NetBIOS name
		specified by the <parameter>name</parameter> parameter.
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--own-domain</term>
		<listitem><para>List own domain.
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-p|--ping</term>
		<listitem><para>Check whether winbindd is still alive. 
		Prints out either 'succeeded' or 'failed'.
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-r|--user-groups username</term>
		<listitem><para>Try to obtain the list of UNIX group ids
		to which the user belongs.  This only works for users
		defined on a Domain Controller.
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-s|--sid-to-name sid</term>
		<listitem><para>Use <parameter>-s</parameter> to resolve
		a SID to a name.  This is the inverse of the <parameter>-n
		</parameter> option above.  SIDs must be specified as ASCII strings 
		in the traditional Microsoft format. For example,
		S-1-5-21-1455342024-3071081365-2475485837-500. </para></listitem>
		</varlistentry>

		<varlistentry>
		<term>--separator</term>
		<listitem><para>Get the active winbind separator.
		</para></listitem>

		</varlistentry>
		<varlistentry>
		<term>--sequence</term>
		<listitem><para>Show sequence numbers of 
		all known domains</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>--set-auth-user username%password</term>
		<listitem><para>Store username and password used by winbindd 
		during session setup to a domain controller.  This enables
		winbindd to operate in a Windows 2000 domain with Restrict
		Anonymous turned on (a.k.a. Permissions compatiable with
		Windows 2000 servers only).
		</para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-S|--sid-to-uid sid</term>
		<listitem><para>Convert a SID to a UNIX user id.  If the SID 
		does not correspond to a UNIX user mapped by <citerefentry>
		<refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum>
		</citerefentry> then the operation will fail. </para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-t|--check-secret</term>
		<listitem><para>Verify that the workstation trust account 
		created when the Samba server is added to the Windows NT
		domain is working. </para></listitem>
		</varlistentry>

		<varlistentry>
		<term>-u|--domain-users</term>
		<listitem><para>This option will list all users available 
		in the Windows NT domain for which the <citerefentry><refentrytitle>winbindd</refentrytitle>
		<manvolnum>8</manvolnum></citerefentry> daemon is operating in. Users in all trusted domains 
		will also be listed.  Note that this operation does not assign 
		user ids to any users that have not already been seen by <citerefentry>
		<refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
		.</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>--user-domgroups SID</term>
		<listitem><para>Get user domain groups.
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>--user-sids SID</term>
		<listitem><para>Get user group SIDs for user.
		</para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-U|--uid-to-sid uid</term>
		<listitem><para>Try to convert a UNIX user id to a Windows NT 
		SID.  If the uid specified does not refer to one within
		the idmap uid range then the operation will fail. </para></listitem>
		</varlistentry>
		
		<varlistentry>
		<term>-Y|--sid-to-gid sid</term>
		<listitem><para>Convert a SID to a UNIX group id.  If the SID 
		does not correspond to a UNIX group mapped by <citerefentry>
		<refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum></citerefentry> then 
		the operation will fail. </para></listitem>
		</varlistentry>


		&stdarg.version;
		&stdarg.help;

	</variablelist>
</refsect1>


<refsect1>
	<title>EXIT STATUS</title>

	<para>The wbinfo program returns 0 if the operation 
	succeeded, or 1 if the operation failed.  If the <citerefentry>
	<refentrytitle>winbindd</refentrytitle><manvolnum>8</manvolnum>
	</citerefentry> daemon is not working <command>wbinfo</command> will always return 
	failure. </para>
</refsect1>


<refsect1>
	<title>VERSION</title>

	<para>This man page is correct for version 3.0 of 
	the Samba suite.</para>
</refsect1>

<refsect1>
	<title>SEE ALSO</title>
	<para><citerefentry><refentrytitle>winbindd</refentrytitle>
	<manvolnum>8</manvolnum></citerefentry> and <citerefentry><refentrytitle>ntlm_auth</refentrytitle>
	<manvolnum>1</manvolnum></citerefentry></para>
</refsect1>

<refsect1>
	<title>AUTHOR</title>
	
	<para>The original Samba software and related utilities 
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar 
	to the way the Linux kernel is developed.</para>
	
	<para><command>wbinfo</command> and <command>winbindd</command>
	were written by Tim Potter.</para>
	
	<para>The conversion to DocBook for Samba 2.2 was done 
	by Gerald Carter. The conversion to DocBook XML 4.2 for Samba
	3.0 was done by Alexander Bokovoy.</para>
</refsect1>

</refentry>
